{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\"; // ⬅️ useEffect toegevoegd\nimport \"../App.css\";\nexport default function Apartments() {\n  _s();\n  const [apartments, setApartments] = useState([]);\n  const [stage, setStage] = useState(\"idle\");\n  const [selectedType, setSelectedType] = useState(\"huur\");\n  const [form, setForm] = useState({\n    type: \"huur\",\n    medewerker: \"\",\n    nummer: \"\",\n    beschrijving: \"\",\n    status: \"leeg\",\n    huishouden: \"\"\n  });\n  const [detail, setDetail] = useState(null);\n  const API_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000\";\n\n  // ⬅️ Ophalen van alle appartementen uit database bij het laden\n  useEffect(() => {\n    const fetchApartments = async () => {\n      try {\n        const res = await fetch(`${API_URL}/apartments`);\n        const data = await res.json();\n        if (res.ok) {\n          setApartments(data);\n        } else {\n          console.error(data.message || \"Fout bij ophalen apartments\");\n        }\n      } catch (err) {\n        console.error(\"Server error:\", err);\n      }\n    };\n    fetchApartments();\n  }, [API_URL]); // ⬅️ draait maar één keer bij laden\n\n  const startAddFlow = () => {\n    setStage(\"chooseType\");\n  };\n  const confirmType = () => {\n    setForm({\n      ...form,\n      type: selectedType\n    });\n    setStage(\"form\");\n  };\n  const handleChange = e => {\n    setForm({\n      ...form,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const payload = {\n      ...form,\n      type: selectedType\n    };\n    const res = await fetch(`${API_URL}/apartments`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(payload)\n    });\n    const data = await res.json();\n    if (res.ok) {\n      const newApartment = {\n        id: data.id,\n        ...payload\n      }; // ⬅️ id uit DB gebruiken\n      setApartments([newApartment, ...apartments]);\n      setForm({\n        type: \"huur\",\n        medewerker: \"\",\n        nummer: \"\",\n        beschrijving: \"\",\n        status: \"leeg\",\n        huishouden: \"\"\n      });\n      setSelectedType(\"huur\");\n      setStage(\"idle\");\n    } else {\n      alert(data.message || \"Fout bij toevoegen\");\n    }\n  };\n  const openDetail = apt => setDetail(apt);\n  const closeDetail = () => setDetail(null);\n  const handleDelete = async id => {\n    try {\n      const res = await fetch(`${API_URL}/apartments/${id}`, {\n        method: \"DELETE\"\n      });\n      if (!res.ok) {\n        const data = await res.json().catch(() => ({}));\n        alert(data.message || \"Delete failed\");\n        return;\n      }\n      setApartments(apartments.filter(a => a.id !== id));\n      closeDetail();\n    } catch (e) {\n      alert(\"Server error while deleting\");\n    }\n  };\n\n  // ... rest van je code (cards, forms, modal) blijft hetzelfde ...\n}\n_s(Apartments, \"e5Mfyxx6i/duX4DGXEGwUNpLsbA=\");\n_c = Apartments;\nvar _c;\n$RefreshReg$(_c, \"Apartments\");","map":{"version":3,"names":["React","useState","useEffect","Apartments","_s","apartments","setApartments","stage","setStage","selectedType","setSelectedType","form","setForm","type","medewerker","nummer","beschrijving","status","huishouden","detail","setDetail","API_URL","process","env","REACT_APP_API_URL","fetchApartments","res","fetch","data","json","ok","console","error","message","err","startAddFlow","confirmType","handleChange","e","target","name","value","handleSubmit","preventDefault","payload","method","headers","body","JSON","stringify","newApartment","id","alert","openDetail","apt","closeDetail","handleDelete","catch","filter","a","_c","$RefreshReg$"],"sources":["C:/Users/altai/Documents/project_developer/EliteHome/EliteHome/elite-home/frontend/src/pages/Apartments.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";   // ⬅️ useEffect toegevoegd\r\nimport \"../App.css\";\r\n\r\nexport default function Apartments() {\r\n    const [apartments, setApartments] = useState([]);\r\n    const [stage, setStage] = useState(\"idle\");\r\n    const [selectedType, setSelectedType] = useState(\"huur\");\r\n    const [form, setForm] = useState({\r\n        type: \"huur\",\r\n        medewerker: \"\",\r\n        nummer: \"\",\r\n        beschrijving: \"\",\r\n        status: \"leeg\",\r\n        huishouden: \"\"\r\n    });\r\n    const [detail, setDetail] = useState(null);\r\n\r\n    const API_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000\";\r\n\r\n    // ⬅️ Ophalen van alle appartementen uit database bij het laden\r\n    useEffect(() => {\r\n        const fetchApartments = async () => {\r\n            try {\r\n                const res = await fetch(`${API_URL}/apartments`);\r\n                const data = await res.json();\r\n                if (res.ok) {\r\n                    setApartments(data);\r\n                } else {\r\n                    console.error(data.message || \"Fout bij ophalen apartments\");\r\n                }\r\n            } catch (err) {\r\n                console.error(\"Server error:\", err);\r\n            }\r\n        };\r\n        fetchApartments();\r\n    }, [API_URL]); // ⬅️ draait maar één keer bij laden\r\n\r\n    const startAddFlow = () => {\r\n        setStage(\"chooseType\");\r\n    };\r\n\r\n    const confirmType = () => {\r\n        setForm({ ...form, type: selectedType });\r\n        setStage(\"form\");\r\n    };\r\n\r\n    const handleChange = (e) => {\r\n        setForm({ ...form, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const payload = { ...form, type: selectedType };\r\n        const res = await fetch(`${API_URL}/apartments`, {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify(payload),\r\n        });\r\n        const data = await res.json();\r\n        if (res.ok) {\r\n            const newApartment = { id: data.id, ...payload }; // ⬅️ id uit DB gebruiken\r\n            setApartments([newApartment, ...apartments]);\r\n            setForm({ type: \"huur\", medewerker: \"\", nummer: \"\", beschrijving: \"\", status: \"leeg\", huishouden: \"\" });\r\n            setSelectedType(\"huur\");\r\n            setStage(\"idle\");\r\n        } else {\r\n            alert(data.message || \"Fout bij toevoegen\");\r\n        }\r\n    };\r\n\r\n    const openDetail = (apt) => setDetail(apt);\r\n    const closeDetail = () => setDetail(null);\r\n\r\n    const handleDelete = async (id) => {\r\n        try {\r\n            const res = await fetch(`${API_URL}/apartments/${id}`, { method: \"DELETE\" });\r\n            if (!res.ok) {\r\n                const data = await res.json().catch(() => ({}));\r\n                alert(data.message || \"Delete failed\");\r\n                return;\r\n            }\r\n            setApartments(apartments.filter((a) => a.id !== id));\r\n            closeDetail();\r\n        } catch (e) {\r\n            alert(\"Server error while deleting\");\r\n        }\r\n    };\r\n\r\n    // ... rest van je code (cards, forms, modal) blijft hetzelfde ...\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}